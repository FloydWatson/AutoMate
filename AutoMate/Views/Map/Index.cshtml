@model AutoMate.Models.UserModel

@{
    ViewBag.Title = "Index";
}

<!doctype html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
          integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
          crossorigin="" />
    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
            integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
            crossorigin=""></script>
    <style>
        #Map {
            height: 60vh;
        }

        #topRow {
            margin-top: 8vh;
        }

       #userIconImg {
           border-radius: 50%;
           width: 6.0em;
           height: 6.0em;
       }

       #cardTitle {
           font-size: 1.5em;
           font-weight:400;
       }

       #titleImgDiv{
          text-align:center;
          padding-top: 0.5em;
           
       }
    </style>
</head>
<body>

    <main>
        <div class="row" id="topRow">
            <section id="MapArea">
                <div class="col-sm-8" id="Map">

                </div>
                <div class="card col-sm-3" id="Details">
                    <div id="titleImgDiv">
                        <img class="card-img-top mx-auto" id="userIconImg" src="~/Images/GenericUserIcon.jpg" alt="User Profile Img">
                        <h5 class="card-title" id="cardTitle">Welcome @Html.DisplayFor(model => model.GivenName)</h5>
                    </div>
                    

                    <ul class="list-group list-group-flush">
                        <li class="list-group-item"><b>Current Rating: </b> @Html.DisplayFor(model => model.Rating)</li>
                        <li class="list-group-item"><b>Nearest Bus Stop: </b>21 Jet Street</li>
                        <li class="list-group-item"><b>Total Carbon Saved: </b> 720kg</li>
                    </ul>
                </div>

            </section>
        </div>
        <div class="row">
            <section id="FilterOptions">
                <select class="form-control col-sm-4" id="Options">
                    <option>Car Pool</option>
                    <option>Buses</option>
                    <option>Cycle</option>

                </select>
                <button type="submit" class="btn btn-primary" value="Send">Continue</button>
            </section>

        </div>



        <section></section>
    </main>

    <script>


        var map = L.map('Map').setView([-36.8485, 174.7633], 15);
        L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
        }).addTo(map);

        @for (int i = 0; i < ViewBag.Data.Count; i++)
        {
            <text>
                var marker = L.marker([@ViewBag.Data[i].stop_lat, @ViewBag.Data[i].stop_lon]).addTo(map)
                marker.bindPopup("@ViewBag.Data[i].stop_name")
            </text>
        }

    </script>
    <input type="button" onclick="map.invalidateSize()" />
</body>
</html>
